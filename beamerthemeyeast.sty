\ProvidesPackage{beamerthemeyeast}

\usepackage{bookmark} % a new bookmark (outline) organization
\usepackage{etoolbox} % for \ifdefempty
\usepackage{concmath} % for better math fonts
\usepackage[sfdefault]{sourcesanspro}
\usepackage[ttdefault]{sourcecodepro}
\usepackage[rmdefault]{sourceserifpro}
\usepackage[T1]{fontenc}

\setlength{\parindent}{0pt}
\setlength{\parskip}{1ex}

\mode<presentation>

  \usetheme{default}
  \usefonttheme{structurebold}     % bold font for title, frametitle, etc.
  \usefonttheme{professionalfonts} % serif font for math letters

  % define the left and right margin of text
  \setbeamersize{text margin left=.05\paperwidth, text margin right=.05\paperwidth}

  % define fonts
  \setbeamerfont{title}{series=\scshape, size=\LARGE}
  \setbeamerfont{subtitle}{shape=\upshape}
  \setbeamerfont{author}{series=\bfseries, shape=\upshape}
  \setbeamerfont{date}{series=\bfseries, shape=\scshape}
  \setbeamerfont{author in head/foot}{shape=\upshape}
  \setbeamerfont{section in head/foot}{shape=\upshape}
  \setbeamerfont{number in head/foot}{shape=\upshape}
  \setbeamerfont{section page}{series=\bfseries, shape=\upshape, size=\Large}
  \setbeamerfont{subsection page}{series=\bfseries, shape=\upshape, size=\normalsize}

  % define colors
  \definecolor{Dark}{HTML}{363237}
  \colorlet{Light}{Dark!5!}
  \colorlet{Grey}{Dark!90!}
  \definecolor{Primary}{HTML}{73605b}
  \definecolor{Secondary}{HTML}{2d4262}
  \definecolor{Tertiary}{HTML}{d09683}

  % define template colors
  \setbeamercolor{frametitle}{fg=Primary}
  \setbeamercolor{block title}{fg=Primary, bg=Primary!25}
  \setbeamercolor{block title alerted}{fg=Tertiary!140, bg=Tertiary!25}
  \setbeamercolor{block title example}{fg=Secondary, bg=Secondary!25}
  \setbeamercolor{block body}{bg=Light}
  \setbeamercolor{block body alerted}{bg=Light}
  \setbeamercolor{block body example}{bg=Light}
  \setbeamercolor{normal text}{fg=Dark}
  \setbeamercolor{alerted text}{fg=Tertiary!150}
  \setbeamercolor{example text}{fg=Secondary}
  \setbeamercolor{title}{fg=Primary}
  \setbeamercolor{subtitle}{fg=Tertiary}
  \setbeamercolor{author}{fg=Grey}
  \setbeamercolor{date}{fg=Grey}
  \setbeamercolor{institute}{fg=Grey}
  \setbeamercolor{section page}{fg=Primary}
  \setbeamercolor{subsection page}{fg=Tertiary}
  \setbeamercolor{author in head/foot}{fg=Secondary, bg=Tertiary}
  \setbeamercolor{section in head/foot}{fg=Tertiary!10, bg=Secondary}
  \setbeamercolor{number in head/foot}{fg=Secondary, bg=Tertiary}
  \setbeamercolor{itemize item}{fg=Secondary}
  \setbeamercolor{itemize subitem}{fg=Secondary}
  \setbeamercolor{itemize subsubitem}{fg=Secondary}
  \setbeamercolor{enumerate item}{fg=Secondary}
  \setbeamercolor{enumerate subitem}{fg=Secondary}
  \setbeamercolor{enumerate subsubitem}{fg=Secondary}
  \setbeamercolor{description item}{fg=Secondary}
  \setbeamercolor{caption name}{fg=Secondary}
  \setbeamercolor{section in toc}{fg=Grey}
  \setbeamercolor{subsection in toc}{fg=Primary}
  \setbeamercolor{math text}{fg=Grey}

  % dim the animated text
  \setbeamercovered{transparent}

  % redefine title page
  \setbeamertemplate{title page}{%
    \center
    \vfill
    {
      \usebeamerfont{title}
      \usebeamercolor[fg]{title}
      \inserttitle
      \par
    }%
    % show subtitle if it's defined
    \ifdefempty{\insertsubtitle}{\relax}{
      \usebeamerfont{subtitle}
      \usebeamercolor[fg]{subtitle}
      \insertsubtitle
      \par
    }%
    \vspace{20pt}
    {
      \usebeamerfont{author}
      \usebeamercolor[fg]{author}
      \insertauthor
      \par
    }%
    % show institute if it's defined
    \ifdefempty{\insertinstitute}{\relax}{
      \usebeamerfont{institute}
      \usebeamercolor[fg]{insititute}
      \footnotesize
      \insertinstitute
      \par
    }%
    {
      \usebeamerfont{date}
      \usebeamercolor[fg]{date}
      \footnotesize
      \insertdate
      \par
    }%
  }

  % define footline
  \setbeamertemplate{footline}{%
    \hbox{%
      \begin{beamercolorbox}[
        wd=.1\paperwidth,
        ht=3ex,
        dp=1.75ex,
        center]{author in head/foot}
        \insertauthor
      \end{beamercolorbox}%
      \begin{beamercolorbox}[
        wd=.8\paperwidth,
        ht=3ex,
        dp=1.75ex,
        center]{section in head/foot}%
        % display priority: subsection > section > title
        \ifdefempty{\insertsection}{
          \inserttitle
        }{
          \ifdefempty{\insertsubsectionhead}{
            \insertsection
          }{
            \insertsubsectionhead
          }
        }
      \end{beamercolorbox}%
      \begin{beamercolorbox}[
        wd=.1\paperwidth,
        ht=3ex,
        dp=1.75ex,
        center]{number in head/foot}
        \insertframenumber\ /\ \inserttotalframenumber
      \end{beamercolorbox}%
    }
  }

  % remove navi symbols
  \setbeamertemplate{navigation symbols}{}

  % use rounded blocks with shadow
  \setbeamertemplate{blocks}[rounded][shadow=true]

  \setbeamertemplate{section in toc}{
    \inserttocsectionnumber. \inserttocsection%
  }
  \setbeamertemplate{subsection in toc}{
    \quad\inserttocsectionnumber.\inserttocsubsectionnumber. \inserttocsubsection\par%
  }

  % redefine itemize items
  \setbeamertemplate{itemize item}{
    \normalsize\raise1pt\hbox{\donotcoloroutermaths$\bullet$}
  }
  \setbeamertemplate{itemize subitem}{
    \scriptsize\raise1.5pt\hbox{\donotcoloroutermaths$\blacktriangleright$}
  }
  \setbeamertemplate{itemize subsubitem}{
    \tiny\raise0.4pt\hbox{\donotcoloroutermaths$\blacksquare$}
  }

  % redefine enumerate items
  \setbeamertemplate{enumerate item}{\arabic{enumi}.}
  \setbeamertemplate{enumerate subitem}{\alph{enumii}.}
  \setbeamertemplate{enumerate subsubitem}{\roman{enumiii}.}

  % insert section head frame
  \AtBeginSection[]{
    \begin{frame}[plain,noframenumbering]
      \vfill
      \center
      \usebeamerfont{section page}
      \usebeamercolor[fg]{section page}
      \insertsectionhead
      \par
      \vfill
    \end{frame}
  }
  \AtBeginSubsection[]{
    \begin{frame}[plain,noframenumbering]
      \vfill
      \center
      \usebeamerfont{section page}
      \usebeamercolor[fg]{section page}
      \insertsectionhead
      \par%
      \usebeamerfont{subsection page}
      \usebeamercolor[fg]{subsection page}
      \insertsubsectionhead
      \par%
      \vfill
    \end{frame}
  }

  % remove frame numbering from title page
  \renewcommand{\maketitle}{
    \begin{frame}[plain,noframenumbering]
      \titlepage
    \end{frame}
  }

\mode<all>
